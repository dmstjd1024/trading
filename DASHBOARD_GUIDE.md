# 대시보드 사용 가이드

한국주식 트레이딩 시스템 웹 대시보드에 대한 초보자용 가이드입니다.

## 실행 방법

```bash
# 가상환경 활성화 후 실행
source venv/bin/activate
python run_dashboard.py

# 또는 직접 streamlit 실행
streamlit run dashboard/app.py
```

실행 후 브라우저에서 **http://localhost:8501** 에 접속하세요.

Cursor IDE에서는 `F5` → **Dashboard (Streamlit)** 선택으로 바로 실행할 수 있습니다.

---

## 메뉴 구성

### 1. 메인 홈 (app)

시스템 전체 상태를 한눈에 보는 페이지입니다.

| 항목 | 의미 |
|------|------|
| 시스템 상태 | 프로그램이 정상 동작 중인지 |
| 자동매매 ON/OFF | 자동으로 주식을 사고파는 기능이 켜져있는지 |
| 현재 시간 | 지금 시각 (주식시장은 9시~15시30분에만 열림) |

---

### 2. 포트폴리오 (portfolio)

**"내 주식 통장 현황"** 페이지입니다.

- **총 평가금액**: 내 계좌에 있는 돈 + 주식 가치를 합친 전체 금액
- **현금 잔고**: 아직 주식을 안 사고 남아있는 현금
- **주식 평가금액**: 내가 가진 주식들의 현재 시세 합계
- **평가손익**: 내가 산 가격 대비 지금 얼마나 벌었는지/잃었는지
- **포트폴리오 구성 (원형 차트)**: 내 돈이 어디에 얼마씩 들어있는지 비율로 보여줌
- **종목별 손익 (막대 차트)**: 각 종목이 수익인지 손실인지 한눈에
- **보유 종목 표**: 종목별 수량, 평균 매입가, 현재가, 수익률 상세 표

> API 키가 없으면 삼성전자/SK하이닉스/카카오 데모 데이터로 보여줍니다.

---

### 3. 백테스트 (backtest)

**"과거 데이터로 전략을 미리 테스트해보기"** 페이지입니다.

쉽게 말해, *"이 방법대로 1년 전부터 매매했으면 돈을 벌었을까?"* 를 시뮬레이션해보는 기능입니다.

#### 사이드바 설정

| 설정 | 의미 |
|------|------|
| **전략 선택** | 어떤 규칙으로 사고팔지 선택 (아래 5가지 중 택1) |
| **종목코드** | 테스트할 주식 (예: 005930 = 삼성전자) |
| **시작일/종료일** | 어느 기간의 데이터로 테스트할지 |
| **데모 데이터** | 체크하면 API 없이 샘플 데이터로 테스트 |
| **초기 자본금** | 시작 투자금 (기본 1,000만원) |
| **수수료율** | 증권사에 내는 매매 수수료 (기본 0.015%) |
| **손절선** | "이만큼 떨어지면 무조건 손해 보고 판다" 기준 (기본 -5%) |
| **익절선** | "이만큼 오르면 이익 확정하고 판다" 기준 (기본 +10%) |

#### 전략 5가지

| 전략 | 쉬운 설명 |
|------|----------|
| **골든크로스** | 최근 5일 평균가격이 20일 평균가격을 넘어서면 "오르겠다!" → 매수 |
| **RSI** | 주가가 너무 많이 떨어져서 과매도 상태이면 "반등하겠다!" → 매수 |
| **볼린저밴드** | 주가가 정상 범위를 벗어나면 "다시 돌아오겠다!" → 매수/매도 |
| **MACD** | 단기 흐름과 장기 흐름의 차이를 보고 추세 전환점을 포착 |
| **복합전략** | 위 전략들을 섞어서 더 정확하게 신호를 걸러냄 |

#### 결과 화면

- **초기 자본금 → 최종 자본금**: 시뮬레이션 결과 돈이 얼마가 됐는지
- **총 수익률**: 몇 % 벌었는지(+) 또는 잃었는지(-)
- **거래 횟수 / 승률**: 총 몇 번 매매했고, 그 중 수익이 난 비율
- **자산 추이 차트**: 시간에 따라 내 돈이 어떻게 변했는지 그래프
- **매매 시점 차트**: 주가 위에 "여기서 샀다/팔았다" 표시
- **거래 내역 표**: 날짜별로 매수/매도 상세 기록

---

### 4. 자동매매 (autotrading)

**"설정해두면 알아서 주식을 사고파는 기능"** 페이지입니다.

> 이 기능은 **실제 API 키 연결이 필수**입니다. (한국투자증권 계좌 필요)

| 기능 | 설명 |
|------|------|
| **자동매매 ON/OFF 토글** | 자동매매 켜기/끄기 스위치 |
| **전략 선택** | 어떤 규칙으로 자동 매매할지 |
| **대상 종목** | 자동매매할 주식 종목들 입력 |
| **매일 실행 시간** | 매일 몇 시에 전략을 돌릴지 (예: 09:30) |
| **종목당 최대 투자 비율** | 한 종목에 전체 자산의 몇 %까지 투자할지 (몰빵 방지) |
| **"지금 실행" 버튼** | 스케줄 기다리지 않고 바로 한 번 실행 |
| **실행 로그** | 언제 무엇을 샀는지/팔았는지 기록 |

---

## 한 줄 요약

| 메뉴 | 한마디 |
|------|--------|
| 포트폴리오 | 내 계좌 현황 확인 |
| 백테스트 | 전략이 과거에 통했는지 시뮬레이션 |
| 자동매매 | 전략을 실전에 자동으로 돌리기 |

---

## API 키 설정

한국투자증권 계좌가 있다면 환경변수를 설정해서 실제 데이터를 사용할 수 있습니다.

```bash
export KIS_APP_KEY="your_app_key"
export KIS_APP_SECRET="your_app_secret"
export KIS_ACCOUNT_NO="00000000-00"
```

API 키가 없어도 **데모 모드**로 모든 기능을 체험할 수 있습니다.
